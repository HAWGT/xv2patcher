<?xml version="1.0" encoding="utf-8" ?>

<!-- 2.4: the file is back to conditional ini setting -->

<EternityPatchFile name="AutoGenPortraitDumper" enabled="dump_auto_gen_portrait" comment="This file enables the dumping of autogenerated portrait image">

	<!-- Address 1.21 -->
	<Patch name="LocateGetTextureBuffer" type="notify" search_start="0x1AAC66" comment="XG::Eva::EmCanvas::GetTextureBuffer(void)" >
		<Instruction code="FF 15 XXXXXXXX" comment="call XG::Eva::EmCanvas::GetTextureBuffer" />
		<Instruction code="4C 8B E0" comment="mov r12, rax" />
		<Instruction code="48 89 45 80" comment="mov [rbp-80], rax" />
		<Instruction code="F3 0F 10 45 E8" comment="movss xmm0, [rbp-18]" />
		<Instruction code="F3 0F 11 45 94" comment="movss dword ptr [rbp-6C], xmm0" />
		<Instruction code="F3 0F 10 4D 00" comment="movss xmm1, [rbp]" />
		<Instruction code="F3 0F 11 4D 9C" comment="movss dword ptr [rbp-64], xmm1" />
		<Instruction code="F3 0F 10 45 E4" comment="movss xmm0, [rbp-1C]" />
		<Instruction code="F3 0F 11 45 90" comment="movss dword ptr [rbp-70], xmm0" />
		
		<Notify value="SetupAutoGenPortraitDumper" />
	</Patch>

</EternityPatchFile>
